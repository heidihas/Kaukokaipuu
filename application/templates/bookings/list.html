{% extends "layout.html" %}

{% block body %}
    <center><h3>Bookings</h3></center>
    <br />

    {% if how_many_bookings is defined %}
    <h4>List of registered clients and the amount of their bookings</h4>
    <br />

    <table class="table">
        <thead class="thead-light">
            <tr>
                <th scope="col">
                    <span class="glyphicon glyphicon-user"></span> Client
                </th>
                <th scope="col">
                    <span class="glyphicon glyphicon-th"></span> Bookings
                </th>
            </tr>
        </thead>
        <tbody>
            {% for client in how_many_bookings %}
            <tr>
                <td>
                    {{ client.name }}
                </td>
                <td>
                    {{ client.count }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
    <br />
    <br />
    
    <h4>List of all bookings</h4>
    <br />

    <table class="table">
        <thead class="thead-light">
            <tr>
                <th scope="col">
                    <span class="glyphicon glyphicon-th"></span> Booking number
                </th>
                <th scope="col">
                    <span class="glyphicon glyphicon-plane"></span> Destination
                </th>
                <th scope="col">
                    <span class="glyphicon glyphicon-bed"></span> Accomodation
                </th>
                <th scope="col">
                    <span class="glyphicon glyphicon-user"></span> Client
                </th>
                <th scope="col">
                    <span class="glyphicon glyphicon-ok"></span> Approved
                </th>
                <th scope="col">
                    <span class="glyphicon glyphicon-envelope"></span> Email notification
                </th>
                <th scope="col">
                    <span class="glyphicon glyphicon-phone-alt"></span> Phone notification
                </th>
            </tr>
        </thead>
        <tbody>
            {% for booking in all_bookings %}
            <tr>
                <td>
                    booking number
                </td>
                <td> 
                    {{ booking.destination }}
                </td>
                <td> 
                    {{ booking.accomodation }} 
                </td>
                <td> 
                    {{ booking.client }}
                </td>
                <td>
                    {% if booking.approved %}
                        <span class="glyphicon glyphicon-ok-circle"></span>
                    {% else %}
                        <form method="POST" action="{{ url_for('bookings_set_approved', booking_id=booking.id) }}">
                                <span class="glyphicon glyphicon-remove-circle"></span>
                            <input type="submit" value="Approve"/>
                        </form>
                    {% endif %}
                </td>
                <td>
                    {% if booking.email %}
                        <span class="glyphicon glyphicon-ok-circle"></span>
                    {% else %}
                        <span class="glyphicon glyphicon-remove-circle"></span>
                    {% endif %}
                </td>
                <td>
                    {% if booking.phone %}
                        <span class="glyphicon glyphicon-ok-circle"></span>
                    {% else %}
                        <span class="glyphicon glyphicon-remove-circle"></span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
